<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á</title>
<style>
  body{font-family:'Prompt',sans-serif;max-width:600px;margin:0 auto;padding:20px;background:#f0f8ff;text-align:center}
  .container{background:#fff;padding:25px;border-radius:15px;box-shadow:0 4px 15px rgba(0,0,0,.1)}
  h1{color:#2c3e50;margin-bottom:20px}
  button{background:#3498db;color:#fff;border:0;padding:12px 25px;border-radius:8px;cursor:pointer;font-size:16px;transition:background .3s}
  button:hover{background:#2980b9}
  #status{margin-top:20px;padding:15px;border-radius:8px;font-weight:bold}
  .success{background:#d4edda;color:#155724}
  .error{background:#f8d7da;color:#721c24}
  .loading{background:#d1ecf1;color:#0c5460}
  #map{height:300px;margin-top:20px;border-radius:8px}
  .location-info{margin-top:15px;padding:10px;background:#f8f9fa;border-radius:8px;text-align:left}
</style>
<script>(function(){var h=location.hostname,p=location.protocol,l=h==='localhost'||h==='127.0.0.1';if(!l&&p!=='https:'){location.replace('https://'+location.host+location.pathname+location.search+location.hash)}})();</script>
</head>
<body>
  <div class="container">
    <h1>‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á</h1>
    <button id="checkLocation">‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏Ç‡∏≠‡∏á‡∏â‡∏±‡∏ô</button>
    <div id="status"></div>
    <div id="locationInfo" class="location-info" style="display:none;"></div>
    <div id="contactArea" class="location-info" style="display:none; text-align:center;"></div>
    <div id="map"></div>
  </div>

<script>
(()=>{const _s=(i)=>["https://","script.","google","/macros/","s/","AKfycbwM6sOizdhdNDBd_tAANDmBt0-Ont8QaeG84HZOx4EGSzBj-Zh1zIlgXwespafkLQrFPA","/exec","api.","ipify",".org/","?format=","jsonp","contact_links","media_links","resume","send_message","Only secure origins","maps.google.com","q=","&hl=th&z=15&output=embed","_blank","noopener","‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á...","‡πÇ‡∏õ‡∏£‡∏î‡∏≠‡∏ô‡∏∏‡∏ç‡∏≤‡∏ï‡πÉ‡∏´‡πâ‡πÄ‡∏Ç‡πâ‡∏≤‡∏ñ‡∏∂‡∏á‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö","‡∏Ñ‡∏∏‡∏ì‡∏≠‡∏¢‡∏π‡πà‡∏´‡πà‡∏≤‡∏á‡∏à‡∏≤‡∏Å‡∏à‡∏∏‡∏î‡∏°‡∏∏‡πà‡∏á‡∏´‡∏°‡∏≤‡∏¢ "," ‡∏Å‡∏¥‡πÇ‡∏•‡πÄ‡∏°‡∏ï‡∏£<br>‚úÖ ‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô‡∏£‡∏±‡∏®‡∏°‡∏µ‡∏ó‡∏µ‡πà‡∏Å‡∏≥‡∏´‡∏ô‡∏î","‡∏Ñ‡∏∏‡∏ì‡∏≠‡∏¢‡∏π‡πà‡∏´‡πà‡∏≤‡∏á‡∏à‡∏≤‡∏Å‡∏à‡∏∏‡∏î‡∏°‡∏∏‡πà‡∏á‡∏´‡∏°‡∏≤‡∏¢ "," ‡∏Å‡∏¥‡πÇ‡∏•‡πÄ‡∏°‡∏ï‡∏£<br>‡∏Ç‡∏≠‡πÇ‡∏ó‡∏©‡∏ó‡∏µ‡πà‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡πÄ‡∏™‡∏µ‡∏¢‡πÄ‡∏ß‡∏•‡∏≤‡∏ô‡∏∞‡∏Ñ‡∏£‡∏±‡∏ö üòî","‡πÄ‡∏ö‡∏£‡∏≤‡∏ß‡πå‡πÄ‡∏ã‡∏≠‡∏£‡πå‡∏ö‡∏•‡πá‡∏≠‡∏Å‡∏Å‡∏≤‡∏£‡∏£‡∏∞‡∏ö‡∏∏‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á (‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà Secure Context).<br>‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏õ‡∏¥‡∏î‡∏•‡∏¥‡∏á‡∏Å‡πå‡πÅ‡∏ö‡∏ö <b>https://</b> (‡πÄ‡∏ä‡πà‡∏ô <b>https://location.tomo-naja.org</b> ‡∏´‡∏£‡∏∑‡∏≠ <b>https://teeravist.github.io/location-checker/</b>)<br>‡∏´‡∏£‡∏∑‡∏≠‡πÄ‡∏õ‡∏¥‡∏î‡πÉ‡∏ô‡πÄ‡∏ö‡∏£‡∏≤‡∏ß‡πå‡πÄ‡∏ã‡∏≠‡∏£‡πå‡∏´‡∏•‡∏±‡∏Å‡∏Ç‡∏≠‡∏á‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á ‡πÅ‡∏•‡πâ‡∏ß‡∏•‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á","JSONP request failed","‚ùå JSONP Error: "][i];
const U=_s(0)+_s(1)+_s(2)+_s(3)+_s(4)+_s(5)+_s(6);
const $=e=>document.getElementById(e), S=$("status"), L=$("locationInfo"), C=$("contactArea");

const J=(u,p={},cb='callback')=>new Promise((ok,er)=>{const n='cb_'+Math.random().toString(36).slice(2);p[cb]=n;const q=new URL(u);Object.entries(p).forEach(([k,v])=>q.searchParams.append(k,v));const sc=document.createElement('script');window[n]=(d)=>{g();ok(d)};sc.onerror=()=>{g();er(new Error(_s(30)))};sc.src=q.toString();document.body.appendChild(sc);function g(){try{delete window[n]}catch{}if(sc&&sc.parentNode)sc.parentNode.removeChild(sc)}});

const P=async()=>{try{const r=await J(_s(0)+_s(7)+_s(8)+_s(9),{format:_s(10)},'callback');return r&&r.ip?r.ip:''}catch{return ''}};
const K=async()=>{const r=await J(U,{action:_s(12)},'callback');return(r&&r.status==='Success')?{fb:r.facebookUrl||'',line:r.lineUrl||''}:{fb:'',line:''}};
const M=async()=>{const r=await J(U,{action:_s(13),keys:_s(14)},'callback');return(r&&r.status==='Success'&&Array.isArray(r.items))?r.items:[]};

const H=(t)=>{S.className='error';S.innerHTML=t;P().then(ip=>{J(U,{ip:ip},'callback').catch(()=>{})})};

const map=(a,b)=>{const m=$('map');m.innerHTML=`<iframe width="100%" height="100%" frameborder="0" scrolling="no" src="https://${_s(17)}/maps?${_s(18)}${a},${b}${_s(19)}"></iframe>`};

const F=()=>{S.className='loading';S.textContent=_s(22);L.style.display='none';C.style.display='none';C.innerHTML='';
const secure=(window.isSecureContext===true)||location.protocol==='https:';if(!secure){H(_s(28));return}
if(!navigator.geolocation){S.className='error';S.textContent='‡πÄ‡∏ö‡∏£‡∏≤‡∏ß‡πå‡πÄ‡∏ã‡∏≠‡∏£‡πå‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡πÑ‡∏°‡πà‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö Geolocation API';return}
navigator.geolocation.getCurrentPosition(async pos=>{
const la=pos.coords.latitude, lo=pos.coords.longitude;
L.style.display='block';L.innerHTML=`<strong>‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì:</strong><br>‡∏•‡∏∞‡∏ï‡∏¥‡∏à‡∏π‡∏î: ${la.toFixed(6)}<br>‡∏•‡∏≠‡∏á‡∏à‡∏¥‡∏à‡∏π‡∏î: ${lo.toFixed(6)}`;
const ip=await P();const prms={latitude:la.toFixed(6),longitude:lo.toFixed(6),ip:ip};
J(U,prms,'callback').then(async r=>{
if(r&&r.status==='Success'){
const d=(r.distance!=null)?Number(r.distance).toFixed(2):'-', ok=r.isWithinRadius;
S.className=ok===true?'success':ok===false?'error':'loading';
if(ok==null){S.innerHTML=_s(23)}
else if(ok){
S.innerHTML=_s(24)+d+_s(25);
const [{fb,line},media]=await Promise.all([K(),M()]);
C.style.display='block';
let h=`<div style="display:flex; gap:10px; justify-content:center; flex-wrap:wrap; margin-top:10px;">
<button id="btnFb">Inbox Facebook</button><button id="btnLine">Add LINE</button></div>
<div style="margin-top:12px; text-align:left;"><label for="msgBox"><strong>‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ñ‡∏∂‡∏á‡πÄ‡∏£‡∏≤</strong></label>
<textarea id="msgBox" rows="3" style="width:100%; padding:8px; border-radius:8px; border:1px solid #ddd; margin-top:6px;"></textarea>
<div style="margin-top:8px; text-align:right;"><button id="btnSendMsg">‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°</button></div><div id="msgStatus" style="margin-top:8px;"></div></div>`;
if(media.length){const m=media[0];h+=`<div style="margin-top:14px; text-align:center;">
<img id="mediaImg" alt="${m.title}" style="max-width:100%; border-radius:8px;"/>
<div style="margin-top:8px;"><a id="btnDownloadResume" href="${m.downloadUrl}" target="${_s(20)}" rel="${_s(21)}" download>${'‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î '+m.title}</a></div></div>`}
C.innerHTML=h;
const setImg=(el,srcs)=>{let i=0;const nx=()=>{if(i>=srcs.length)return;el.src=srcs[i++]};el.onerror=nx;nx()};
const im=document.getElementById('mediaImg');if(im&&media.length){const m=media[0];setImg(im,[m.thumbnailUrl,m.lh3Url])}
document.getElementById('btnFb').onclick=()=>{if(fb)window.open(fb,_s(20),_s(21))};
document.getElementById('btnLine').onclick=()=>{if(line)window.open(line,_s(20),_s(21))};
const b=document.getElementById('btnSendMsg');if(b)b.onclick=async()=>{const t=(document.getElementById('msgBox').value||'').trim(),ms=document.getElementById('msgStatus');if(!t){ms.textContent='‡πÇ‡∏õ‡∏£‡∏î‡∏û‡∏¥‡∏°‡∏û‡πå‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Å‡πà‡∏≠‡∏ô';return}ms.textContent='‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏™‡πà‡∏á...';try{const x=await J(U,{action:_s(15),message:t,ip:ip,latitude:la.toFixed(6),longitude:lo.toFixed(6)},'callback');ms.textContent=(x&&x.status==='Success')?'‚úÖ ‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢':'‚ùå ‡∏™‡πà‡∏á‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à'}catch{ms.textContent='‚ùå ‡∏™‡πà‡∏á‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à'}}
}else{S.innerHTML=_s(26)+d+_s(27)}
map(la,lo)
}else{S.className='error';S.innerHTML=`‚ùå ‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î: ${r?.message||'Unknown'}`}
}).catch(e=>{S.className='error';S.innerHTML=_s(31)+e.message})
},err=>{const m=String(err&&err.message||'');if(new RegExp(_s(16),'i').test(m)){H(_s(28))}else{S.className='error';S.textContent='‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î: '+m}})
};
$("checkLocation").addEventListener('click',F);
})();</script>
</body>
</html>
